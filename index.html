<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рд╣рдорд░ рдмрд┐рд░рд╕рд╛ рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ 2025</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; color: #333; }
.container { max-width: 600px; margin: auto; padding: 20px; background: #fff; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1);}
h2 { text-align: center; }
label { display: block; margin: 10px 0 5px; }
input, select, textarea { width: 100%; padding: 8px; margin-bottom: 10px; }
button { padding: 10px 20px; background: #007BFF; color: white; border: none; cursor: pointer; }
button:hover { background: #0056b3; }
.slip { display: none; margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 5px; background: #fefefe; }
.muted { color: #666; margin-bottom: 15px; }
</style>
</head>
<body>
<div class="container">
<h2>рд╣рдорд░ рдмрд┐рд░рд╕рд╛ рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ 2025</h2>
<div class="muted">ЁЯУЕ рдкрд░реАрдХреНрд╖рд╛ рддрд┐рдерд┐: 19/11/2025 ┬╖ тП░ рдЙрдкрд╕реНрдерд┐рддрд┐: 9:30тАУ10:30 ┬╖ рдкрд░реАрдХреНрд╖рд╛: 11:00тАУ12:00</div>

<form id="examForm" class="no-print">
  <label>рдирд╛рдо: <input type="text" name="name" required></label>
  <label>рд╢рд┐рдХреНрд╖рд╛: <input type="text" name="education"></label>
  <label>рд╡рд┐рджреНрдпрд╛рд▓рдп / рдХреЙрд▓реЗрдЬ: <input type="text" name="school"></label>
  <label>рд▓рд┐рдВрдЧ:
    <select name="gender">
      <option value="">--Select--</option>
      <option value="рдкреБрд░реБрд╖">рдкреБрд░реБрд╖</option>
      <option value="рдорд╣рд┐рд▓рд╛">рдорд╣рд┐рд▓рд╛</option>
      <option value="рдЕрдиреНрдп">рдЕрдиреНрдп</option>
    </select>
  </label>
  <label>Email: <input type="email" name="email"></label>
  <label>рдореЛрдмрд╛рдЗрд▓: <input type="tel" name="mobile" required></label>
  <label>рдкрддрд╛: <textarea name="address"></textarea></label>
  <label>Transaction ID: <input type="text" name="txnid" required></label>
  <label>Payment Screenshot: <input type="file" name="screenshot" accept="image/*" required></label>
  <button type="submit">рд╕рдмрдорд┐рдЯ рдХрд░реЗрдВ</button>
</form>

<div id="slip" class="slip">
  <h3>рдЖрдкрдХрд╛ рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░</h3>
  <div id="slipDetails"></div>
  <button onclick="resetPage()">рдирдпрд╛ рдлреЙрд░реНрдо</button>
</div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxbCvUPPlKN47svhxgNn_RVeaF8mChGjPyGmJez4SccjOultOdmRKP3yw4aibD2b4ynKA/exec";
const form = document.getElementById('examForm');
const slip = document.getElementById('slip');
const slipDetails = document.getElementById('slipDetails');

form.addEventListener('submit', e => {
  e.preventDefault();
  const data = new FormData(form);
  const file = data.get('screenshot');

  if(!file || !file.name) { alert("тЪая╕П рдХреГрдкрдпрд╛ payment screenshot upload рдХрд░реЗрдВред"); return; }

  const reader = new FileReader();
  reader.onload = async () => {
    const base64Screenshot = reader.result.split(',')[1];

    const payload = {
      name: data.get('name'),
      education: data.get('education'),
      school: data.get('school'),
      gender: data.get('gender'),
      email: data.get('email'),
      mobile: data.get('mobile'),
      address: data.get('address'),
      txnid: data.get('txnid'),
      screenshot: base64Screenshot
    };

    try {
      const res = await fetch(scriptURL, { 
        method:'POST', 
        body:JSON.stringify(payload), 
        headers:{'Content-Type':'application/json'} 
      });
      const result = await res.json();
      if(result.status !== "success") throw new Error(result.message || "Error saving data");
    } catch(err) {
      alert("тЭМ рдбреЗрдЯрд╛ Google рд╢реАрдЯ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрд╛, рдкрд░ рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред");
      console.error(err);
    }

    slipDetails.innerHTML = `
      <p><b>рдирд╛рдо:</b> ${escapeHtml(payload.name)}</p>
      <p><b>рд╢рд┐рдХреНрд╖рд╛:</b> ${escapeHtml(payload.education)}</p>
      <p><b>рд╡рд┐рджреНрдпрд╛рд▓рдп / рдХреЙрд▓реЗрдЬ:</b> ${escapeHtml(payload.school)}</p>
      <p><b>рд▓рд┐рдВрдЧ:</b> ${escapeHtml(payload.gender)}</p>
      <p><b>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</b> ${escapeHtml(payload.mobile)}</p>
      <p><b>рдкрддрд╛:</b> ${escapeHtml(payload.address)}</p>
      <p><b>Transaction ID:</b> ${escapeHtml(payload.txnid)}</p>
    `;
    form.style.display='none'; 
    slip.style.display='block'; 
    window.scrollTo(0,0);
  };
  reader.readAsDataURL(file);
});

function resetPage(){ 
  form.reset(); 
  form.style.display='block'; 
  slip.style.display='none'; 
  slipDetails.innerHTML=''; 
}

function escapeHtml(text){ 
  if(!text) return ''; 
  return text.replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m])); 
}
</script>
</body>
</html>

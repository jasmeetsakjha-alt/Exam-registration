<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>рд╣рдорд░ рдмрд┐рд░рд╕рд╛ рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ 2025</title>
  <style>
    body { font-family: "Noto Sans Devanagari", sans-serif; background: #f5f7fa; margin: 0; padding: 20px; }
    .container { max-width: 700px; margin: auto; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
    h2 { text-align: center; color: #1a237e; margin: 0 0 10px; }
    label { display:block; margin-top:12px; font-weight:600; }
    input, select, textarea {
      width:100%; padding:10px; margin-top:6px;
      border:1px solid #d0d6df; border-radius:8px;
      box-sizing:border-box; font-size:15px;
    }
    button {
      margin-top:18px; width:100%; padding:12px;
      border:none; border-radius:8px;
      background:#1565c0; color:#fff; font-size:16px;
      cursor:pointer;
    }
    button:hover { background:#0d47a1; }
    .muted { color:#546e7a; font-size:14px; text-align:center; }
    .note { background:#fff8e1; padding:10px; border-radius:8px; margin-top:10px; color:#7a4d00; }
    .slip {
      display:none; margin-top:24px; border:2px dashed #1a237e;
      padding:18px; border-radius:10px; background:#fff; color:#111;
    }
    .slip h3 { text-align:center; margin:0 0 8px; color:#1a237e; }
    @media print { .no-print { display:none } .container { box-shadow:none; border-radius:0 } }
  </style>
</head>
<body>
  <div class="container">
    <h2>рд╣рдорд░ рдмрд┐рд░рд╕рд╛ рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ 2025</h2>
    <div class="muted">ЁЯУЕ рдкрд░реАрдХреНрд╖рд╛ рддрд┐рдерд┐: 19/11/2025 ┬╖ тП░ рдЙрдкрд╕реНрдерд┐рддрд┐: 9:30тАУ10:30 ┬╖ рдкрд░реАрдХреНрд╖рд╛: 11:00тАУ12:00</div>

    <!-- === Registration Form === -->
    <form id="examForm" class="no-print">
      <label>рдирд╛рдо:</label>
      <input type="text" name="naam" required>

      <label>рд╢рд┐рдХреНрд╖рд╛:</label>
      <input type="text" name="siksha" required>

      <label>рд╕реНрдХреВрд▓ / рдХреЙрд▓реЗрдЬ:</label>
      <input type="text" name="school" required>

      <label>рд▓рд┐рдВрдЧ:</label>
      <select name="ling" required>
        <option value="">рдЪреБрдиреЗрдВ</option>
        <option value="рдкреБрд░реБрд╖">рдкреБрд░реБрд╖</option>
        <option value="рдорд╣рд┐рд▓рд╛">рдорд╣рд┐рд▓рд╛</option>
        <option value="рдЕрдиреНрдп">рдЕрдиреНрдп</option>
      </select>

      <label>рдИрдореЗрд▓ (рдпрджрд┐ рд╣реЛ):</label>
      <input type="email" name="email">

      <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</label>
      <input type="tel" name="mobile" required>

      <label>рдкрддрд╛:</label>
      <textarea name="pataa" rows="2" required></textarea>

      <div class="muted" style="margin-top:15px;">
        тВ╣20 рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░реЗрдВ тАФ <b>UPI ID: 9798789203@ptyes</b>
      </div>
      <div style="text-align:center;margin-top:8px;">
        <img src="https://api.qrserver.com/v1/create-qr-code/?data=upi://pay?pa=9798789203@ptyes&pn=Hamar%20Birsa%20Exam&am=20&cu=INR" width="160" alt="QR">
      </div>

      <label style="margin-top:12px;">рд▓реЗрди-рджреЗрди рд╕рдВрдЦреНрдпрд╛ (Transaction ID)</label>
      <input type="text" name="txnid" required>

      <div class="note">тЪая╕П рдХреЗрд╡рд▓ рд╕рддреНрдпрд╛рдкрд┐рдд рднреБрдЧрддрд╛рди рдкрд░ рд╣реА рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░ рдорд╛рдиреНрдп рдорд╛рдирд╛ рдЬрд╛рдПрдЧрд╛ред</div>

      <button type="submit">рдЬрдорд╛ рдХрд░реЗрдВ рдФрд░ рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░ рджреЗрдЦреЗрдВ</button>
    </form>

    <!-- === Admit Card Slip === -->
    <div id="slip" class="slip">
      <h3>рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░</h3>
      <p><b>рдкрд░реАрдХреНрд╖рд╛ рдирд╛рдо:</b> рд╣рдорд░ рдмрд┐рд░рд╕рд╛ рд╕рд╛рдорд╛рдиреНрдп рдЬреНрдЮрд╛рди рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛ 2025</p>
      <p><b>рдХреЗрдВрджреНрд░:</b> JJ College, рдЭреБрдорд░реА рддрд┐рд▓реИрдпрд╛, рдХреЛрдбрд░рдорд╛</p>
      <p><b>рдкрд░реАрдХреНрд╖рд╛ рддрд┐рдерд┐:</b> 19 рдирд╡рдореНрдмрд░ 2025</p>
      <p><b>рдЙрдкрд╕реНрдерд┐рддрд┐:</b> 9:30тАУ10:30</p>
      <p><b>рдкрд░реАрдХреНрд╖рд╛ рд╕рдордп:</b> 11:00тАУ12:00</p>
      <hr>
      <div id="slipDetails"></div>

      <div style="margin-top:12px;font-size:13px" class="muted">
        рдирд┐рд░реНрджреЗрд╢: рдпрд╣ рдкрд░реНрдЪреА рдЕрдирд┐рд╡рд╛рд░реНрдп рд╣реИ тАФ рдкреНрд░рд┐рдВрдЯ рдЖрдЙрдЯ рдФрд░ рд╡реИрдз рдкрд╣рдЪрд╛рди рдкрддреНрд░ рд╕рд╛рде рд▓рд╛рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред
      </div>

      <div class="no-print" style="margin-top:12px;">
        <button onclick="window.print()">ЁЯЦия╕П рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ</button>
        <button class="no-print" onclick="resetPage()">ЁЯФД рдирдпрд╛ рдкрдВрдЬреАрдХрд░рдг</button>
      </div>
    </div>
  </div>

  <script>
    // ЁЯЯв рдЕрдкрдиреЗ Google Apps Script URL рд╕реЗ рдмрджрд▓реЛ тЖУ
    const scriptURL = "https://script.google.com/macros/s/AKfycbyB-oeX3z21YrDBV0X6quoYoiJTtWw4UHdhoT-GqVqsexTWt2VuZRRv_7FFLYFviMtj/exec";

    const form = document.getElementById('examForm');
    const slip = document.getElementById('slip');
    const slipDetails = document.getElementById('slipDetails');

    form.addEventListener('submit', async e => {
      e.preventDefault();
      const data = Object.fromEntries(new FormData(form).entries());

      // === 1я╕ПтГг Save data to Google Sheet ===
      try {
        const res = await fetch(scriptURL, {
          method: 'POST',
          body: new FormData(form)
        });
        if (!res.ok) throw new Error('Network error');
      } catch(err) {
        alert("тЭМ рдбреЗрдЯрд╛ Google рд╢реАрдЯ рдореЗрдВ рдирд╣реАрдВ рдЬрд╛ рд╕рдХрд╛, рдкрд░ рдкреНрд░рд╡реЗрд╢ рдкрддреНрд░ рджрд┐рдЦрд╛рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред");
        console.error(err);
      }

      // === 2я╕ПтГг Show Admit Card ===
      slipDetails.innerHTML = `
        <p><b>рдирд╛рдо:</b> ${escapeHtml(data.naam)}</p>
        <p><b>рд╢рд┐рдХреНрд╖рд╛:</b> ${escapeHtml(data.siksha)}</p>
        <p><b>рд╡рд┐рджреНрдпрд╛рд▓рдп / рдХреЙрд▓реЗрдЬ:</b> ${escapeHtml(data.school)}</p>
        <p><b>рд▓рд┐рдВрдЧ:</b> ${escapeHtml(data.ling)}</p>
        <p><b>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░:</b> ${escapeHtml(data.mobile)}</p>
        <p><b>рдкрддрд╛:</b> ${escapeHtml(data.pataa)}</p>
      `;
      form.style.display = 'none';
      slip.style.display = 'block';
      window.scrollTo(0, 0);
    });

    function resetPage(){
      form.reset();
      form.style.display = 'block';
      slip.style.display = 'none';
      slipDetails.innerHTML = '';
    }

    function escapeHtml(text){
      if(!text) return '';
      return text.replace(/[&<>"']/g, m => (
        {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;"}[m]
      ));
    }
  </script>
</body>
</html>
